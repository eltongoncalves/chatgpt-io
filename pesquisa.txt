   public boolean validarRetentativaFiis(PagamentoRequest request, int receiveCount) {

        var fazerRetentativa = true;

        if (receiveCount > 1) {
            PagamentoStatus status = new PagamentoStatus();
            try {

                int numeroDias = (int) Duration.between(request.getDataPagamento().plusDays(-1), LocalDateTime.now()).toDays();
                var historicoTransacoesResponse = this.buscarHistoricoTransacoesUseCase.executar(
                        request.getFinalNumeroCartao(),
                        request.getNumeroBin(),
                        request.getCpf(),
                        numeroDias,
                        request.getFinalNumeroCartao()
                );

                var dataPagamento = request.getDataPagamento();
                var horaTransacao = dataPagamento.toLocalTime();
                var horaTransacaoPlus = dataPagamento.toLocalTime().plusMinutes(receiveCount * 15L);

                var transacoes = historicoTransacoesResponse.getResponseData().getListaAutorizacoes().stream().filter(
                        autorizacao -> autorizacao.getValorFaturamento().doubleValue() == request.getValorTransacao() &&
                                autorizacao.getDtTransacao().toString().equals(dataPagamento.toLocalDate().toString()) &&
                                LocalTime.parse(autorizacao.getHrTransacao()).isAfter(horaTransacao) &&
                                LocalTime.parse(autorizacao.getHrTransacao()).isBefore(horaTransacaoPlus)
                ).toList();

                if (transacoes.isEmpty()) {
                    throw new InternalServerErrorException("AUTORIZAÇÃO NÃO ENCONTRADA", "Falha ao verificar as autorizações");
                }

                status.setSucesso(true);
                status.setMensagem(MSG_SUCESSO);
                this.postaMensagemDeRetorno(request, status);

                fazerRetentativa = false;

            } catch (Exception e) {
                logError("validarRetentativaFiisError", Layer.INTERACTORS, "AUTORIZAÇÃO NÃO ENCONTRADA.", this.getClass(), e).log();
            }

        }

        return fazerRetentativa;

    }
